# 项目概览

## 系统架构

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   WebSocket     │    │   异动检测器    │    │   数据更新器    │
│   数据收集器    │───▶│   (每分钟)      │    │   (每3分钟)     │
│                 │    │                 │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘
         │                       │                       │
         ▼                       ▼                       ▼
┌─────────────────────────────────────────────────────────────────┐
│                        SQLite 数据库                           │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐│
│  │   klines    │ │  anomalies  │ │  ai_coins   │ │oi_rankings  ││
│  │   K线数据   │ │   异动数据  │ │  AI选币     │ │  持仓量排行 ││
│  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘│
└─────────────────────────────────────────────────────────────────┘
                               │
                               ▼
                    ┌─────────────────┐
                    │   API 服务器    │
                    │  (HTTP接口)     │
                    └─────────────────┘
```

## 数据流向

1. **数据收集**：WebSocket实时收集150个合约的15分钟K线
2. **异动检测**：每分钟分析价格、成交量、波动率异动
3. **数据更新**：每3分钟更新AI选币排行和持仓量排行
4. **自动清理**：每小时检查并清理超过24小时的数据
5. **API服务**：提供HTTP接口查询所有数据

## 核心特性

- ✅ **实时性**：WebSocket + 本地数据库，毫秒级响应
- ✅ **智能性**：多维度异动检测，AI选币排行
- ✅ **可靠性**：自动重连、重试、去重机制
- ✅ **可配置**：灵活的参数配置和数据管理
- ✅ **可扩展**：模块化设计，易于扩展新功能

## 快速开始

```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 启动系统
python main.py

# 3. 访问API
curl http://localhost:5000/api/health
```

详细文档请查看 `README.md` 和 `DATABASE_MANAGEMENT.md`。